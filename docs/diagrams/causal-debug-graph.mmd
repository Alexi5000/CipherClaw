%%{init: {'theme': 'dark', 'themeVariables': {'primaryColor': '#7c3aed', 'primaryTextColor': '#e0e0e0', 'lineColor': '#00ff41'}}}%%

graph LR
    subgraph CDG["Causal Debug Graph Â· Patent Claim 1"]
        direction LR
        S1["âœ… Span: Agent Init<br/>OK Â· 120ms"]
        S2["âœ… Span: Plan Task<br/>OK Â· 340ms"]
        S3["âš ï¸ Span: Tool Call<br/>WARN Â· 890ms"]
        S4["âŒ Span: Memory Write<br/>ERROR Â· 45ms"]
        S5["âŒ Span: Retry<br/>ERROR Â· 12ms"]
        S6["âš ï¸ Span: Escalation<br/>WARN Â· 200ms"]
        RC["ğŸ¯ Root Cause<br/>Memory Write Failed<br/>P=0.87"]

        S1 -->|"control_flow"| S2
        S2 -->|"control_flow"| S3
        S3 -->|"data_dependency"| S4
        S4 -->|"error_propagation"| S5
        S5 -->|"error_propagation"| S6
        S4 -.->|"identified as"| RC
    end

    style S1 fill:#059669,stroke:#34d399,stroke-width:2px,color:#fff
    style S2 fill:#059669,stroke:#34d399,stroke-width:2px,color:#fff
    style S3 fill:#ea580c,stroke:#fb923c,stroke-width:2px,color:#fff
    style S4 fill:#dc2626,stroke:#ff4444,stroke-width:2px,color:#fff
    style S5 fill:#dc2626,stroke:#ff4444,stroke-width:2px,color:#fff
    style S6 fill:#ea580c,stroke:#fb923c,stroke-width:2px,color:#fff
    style RC fill:#7c3aed,stroke:#00ff41,stroke-width:3px,color:#fff
